<script type="text/javascript"> 
  var employeesTemplate;

  $(document).ready(function() {
    employeesTemplate = new EmployeesTemplate();

    employeesTemplate.init(<%= raw (@employees.map{ |r| r.attributes }).to_json %>);
    employeesTemplate.parmDeleteActionSelector("a[data-remote].delete");
    employeesTemplate.parmTableSelector("#employees-table-container");
    employeesTemplate.parmEditFormSelector("#employee_edit");
    employeesTemplate.parmExtractingSelector("#employee");

    employeesTemplate.setEditAction();
  });
</script>

<h1 style="display: inline-block;">Сотрудники</h1>

<%= form_tag('employee_group_destroy', :remote => true, :method => :post) do %>
<div class="btn-group" style="margin-bottom: 15px;">
  <button type="button" class="btn btn-default" data-toggle="modal" data-target="#newModal">Создать</button>
  <%= submit_tag "Удалить", :class => "btn btn-default" %>
</div>

<div id="employees-table-container" class="table-responsive standart-table-container">
<table id="employees-table" class="table table-striped table-hover table-condensed table-bordered table-autosort">
  <thead>
    <tr>
      <th></th>
      <th class="table-sortable:numeric table-sortable">Номер</th>
      <th class="table-sortable:default table-sortable">Имя</th>
    </tr>
    <tr>
      <th></th>
      <th><input class="form-control" type="text" onkeyup="Table.filter(this,this)"></th>
      <th><input class="form-control" type="text" onkeyup="Table.filter(this,this)"></th>
    </tr>
  </thead>

  <tbody id ="employees">
    <% @employees.each do |employee| %>
      <tr id="<%= employee.id %>" data-link="<%= edit_employee_path(employee) %>">
        <td class="actions">
          <%= check_box_tag 'for_destroy[]', employee.id, false %>
        </td>
        <td><%= employee.id %></td>
        <td><%= employee.name %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
<% end %>

<div id="employee_edit" class="displacer"></div> 