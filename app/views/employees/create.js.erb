function addNewEmployee()
{
	if("<%= @employee.errors.count %>" != 0)
	{
		var msg = $("#error-msg");
		showErrorMessage("Количество ошибок: <%= @employee.errors.count %><br>" +
		                 "Проверьте обязательные для ввода поля",
		                 msg);

		var errors = <%= raw @employee.errors.to_json %>;

		for(var key in errors) {
			if(errors[key].length > 0) {
				$('#newModal').find('#' + key).addClass('has-error');
			}
		}
	}
	else
	{
		<% if @employee.id %>

		var tr = $("<tr style='opacity: 0;' id='<%= @employee.id %>' data-link='<%= edit_employee_path(@employee) %>'>" +
		"<td class='actions'>" + 
			"<%= escape_javascript(check_box_tag 'for_destroy[]', @employee.id, false) %>" +
		"</td>" +
		"<td><%= @employee.id %></td>" +
		"<td><%= @employee.name %></td>" +
		"</tr>");

		employeesTemplate.insertRow(tr, <%= raw @employee.attributes.to_json %>);

		var msg = $("#success-msg");
		showSuccessMessage("Сотрудник успешно создан", msg);

		var form = $("#new_employee");
    	form.find("#employee_name").val('');

    	$('#newModal div').removeClass('has-error');
    	$('#newModal').modal('hide');

    	<% end %>

	}
}

addNewEmployee();