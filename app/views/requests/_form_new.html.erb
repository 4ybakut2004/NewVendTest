<form ng-submit="createRequest()" class="form-horizontal">
  <div class="text-center">
    <% Request.request_types.each do |key, value| %>
    <button type="button" class="btn btn-default" ng-class='{active: newRequestType == "<%= key %>"}' ng-click='setNewRequestType("<%= key %>")'><%= value %></button>
    <% end %>
  </div><br>

  <div class="form-group" ng-class='{"has-warning": !inputs.machineId, "has-success": inputs.machineId}' ng-show="inputs.requestType">
    <label class="col-sm-3 control-label" for="machine_id">Автомат</label>
    <div class="col-sm-9">
      <select ng-model="newMachineId" 
        ng-init="newMachineId = <%= Machine.order('name ASC').first.id %>"
        ng-options="machine.id as machine.name for machine in <%= Machine.order('name ASC').all.collect { |m| {:id => m.id, :name => m.name} }.to_json %>"
        class="form-control">
      </select>
    </div>
  </div>

  <div class="form-group" ng-class='{"has-success": inputs.phone}' ng-show='newRequestType=="phone"'>
    <label class="col-sm-3 control-label" for="phone">Телефон</label>
    <div class="col-sm-9">
      <input id="phone" type="text" ng-model='newPhone' placeholder="Введите номер телефона" class="form-control">
    </div>
  </div>

  <div class="text-center" ng-show="inputs.requestType">
    <button style="margin: 5px;" ng-repeat="message in messages | filter:{request_type: newRequestType}" type="button" class="btn btn-default">{{message.name}}</button>
    <button style="margin: 5px;" type="button" class="btn btn-default">Другое</button>
  </div>

  <div class="row form-footer" ng-show="inputs.requestType">
    <div class="col-sm-12 text-right"><input type="submit" value="Создать" class="btn btn-primary"></div>
  </div>
</form>

